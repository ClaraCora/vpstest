# 更新日志

所有重要的项目变更都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [1.0.0] - 2025-12-03

### 新增

#### 核心功能
- ✨ 综合监控脚本 `monitor.sh`，集成时间同步和网络检测
- ✨ 自动化安装脚本 `auto_install.sh`，支持一键部署
- ✨ 独立时间同步脚本 `sync_time.sh`
- ✨ 独立网络检测脚本 `check_network.sh`

#### 时间同步功能
- ⏰ 支持阿里云时间源（主要）
- ⏰ 支持百度时间源（备用）
- ⏰ 自动同步系统时间和硬件时钟
- ⏰ 集成 Chrony 服务强制同步
- ⏰ 详细记录时间调整量

#### 网络监控功能
- 🌐 Ping 检测网络连通性（默认：223.5.5.5）
- 🌐 智能重试机制（3次，间隔10秒）
- 🌐 失败时记录完整网络状态
- 🌐 网络故障自动重启系统
- 🌐 重启前30秒警告期

#### 自动化部署
- 🚀 自动检测操作系统类型
- 🚀 支持 Debian/Ubuntu/CentOS/RHEL
- 🚀 自动安装依赖包（chrony、curl等）
- 🚀 自动配置 Crontab 定时任务
- 🚀 自动备份现有 crontab 配置
- 🚀 彩色终端输出，友好提示

#### 日志系统
- 📝 独立日志目录结构
- 📝 时间戳记录每次操作
- 📝 详细的执行状态记录
- 📝 错误信息完整记录

#### 文档
- 📚 完整的 README.md 项目说明
- 📚 QUICKSTART.md 快速使用指南
- 📚 crontab_config.txt 定时任务配置说明
- 📚 LICENSE MIT 许可证
- 📚 .gitignore Git 配置文件

### 配置

#### 默认定时任务
- ⏱️ 每2小时执行一次监控任务
- ⏱️ 执行时间：0:00, 2:00, 4:00, 6:00, 8:00, 10:00, 12:00, 14:00, 16:00, 18:00, 20:00, 22:00

#### 日志目录
- `/var/log/monitor/` - 综合监控日志
- `/var/log/sync_time/` - 时间同步日志
- `/var/log/check_network/` - 网络检测日志

### 技术细节

#### 支持的系统
- Debian 9+
- Ubuntu 16.04+
- CentOS 7+
- RHEL 7+

#### 依赖要求
- bash
- curl
- chrony
- systemctl
- crontab
- ping/iputils

#### 脚本权限
- 需要 root 权限运行
- 自动设置可执行权限

### 安全性

- ✅ 备份现有 crontab 配置
- ✅ 详细的错误处理机制
- ✅ 重启前警告和状态记录
- ✅ 完整的日志审计跟踪

### 已知限制

- ⚠️ 需要 root 权限
- ⚠️ 需要公网访问能力
- ⚠️ 虚拟机环境可能不支持硬件时钟同步
- ⚠️ 网络检测失败会触发系统重启

---

## 版本说明

### 版本号规则

格式: `主版本号.次版本号.修订号`

- **主版本号**: 不兼容的 API 修改
- **次版本号**: 向下兼容的功能性新增
- **修订号**: 向下兼容的问题修正

### 更新类型

- `新增` - 新功能
- `变更` - 已有功能的变更
- `废弃` - 即将移除的功能
- `移除` - 已移除的功能
- `修复` - Bug 修复
- `安全` - 安全相关的修复

---

## 未来计划

### v1.1.0 (计划中)
- [ ] 支持自定义时间源
- [ ] 邮件/Webhook 告警通知
- [ ] 更多网络检测目标
- [ ] 日志自动清理功能
- [ ] Web 控制面板
- [ ] Docker 容器化支持

### v1.2.0 (待定)
- [ ] 多服务器集中监控
- [ ] 性能监控（CPU、内存、磁盘）
- [ ] 数据可视化
- [ ] API 接口支持

---

[1.0.0]: https://github.com/ClaraCora/vpstest/releases/tag/v1.0.0
